### 1. Understanding the Goal

The primary objective is to resolve the `RollupError: [plugin impound] Vue app aliases are not allowed in server runtime` that occurs when running `bun dev`. This error prevents the Nuxt application from starting correctly. The fix should be developed in a new, clearly named branch, and the entire process should follow a well-defined strategic plan.

### 2. Investigation & Analysis

To formulate an effective strategy, a thorough investigation is required. The following steps will be taken to gather the necessary context:

1.  **Analyze the Error Message:** The error explicitly points to `server/utils/listNuxtModules.ts` and the import of `#build/types/nuxt-tools`. This tells us that a server-side file is attempting to use a client-side alias, which is not permitted in the Nuxt server runtime.

2.  **Examine the Offending File:** The first step is to read the contents of `server/utils/listNuxtModules.ts` to understand how the problematic import is being used.

3.  **Understand the Imported Module:** I will investigate what `#build/types/nuxt-tools` is. This is likely a virtual file generated by Nuxt during the build process, containing type definitions for the tools available to the application. I will search the Nuxt documentation and the project's `.nuxt` directory to confirm this.

4.  **Research Nuxt Server-Side Development:** I will consult the Nuxt documentation to understand the limitations of the server runtime and the correct way to access server-side functionality and environment variables. I will search for terms like "Nuxt server runtime," "Nitro server," "server-side helpers," and "using aliases on the server."

5.  **Identify an Alternative Approach:** The core of the problem is the incorrect use of a client-side alias on the server. The investigation will focus on finding the correct, server-side mechanism to achieve the same goal, which is to call the `list_nuxt_modules` tool.

### 3. Proposed Strategic Approach

The proposed strategy is divided into distinct phases to ensure a structured and methodical resolution.

**Phase 1: Branch Creation**

1.  Create a new branch from the `main` branch. The branch will be named `fix/server-alias-error` to clearly communicate its purpose.

**Phase 2: Code Modification**

1.  **Isolate the Problem:** The issue is in `server/utils/listNuxtModules.ts`. The line `import { listNuxtModules as listNuxtModulesTool } from '#build/types/nuxt-tools'` needs to be removed or replaced.
2.  **Find the Server-Side Equivalent:** The goal is to call the `list_nuxt_modules` tool from a server route. Instead of importing it from a build alias, the correct approach is to use the tools directly within the server route handler.
3.  **Refactor the Server Route:** The logic from `server/utils/listNuxtModules.ts` will be moved directly into the `server/api/modules.get.ts` file. The `defineEventHandler` will be modified to be an `async` function, and the `list_nuxt_modules` tool will be called directly within it. The `server/utils/listNuxtModules.ts` file will then be deleted as it is no longer needed.

**Phase 3: Implementation**

1.  **Modify `server/api/modules.get.ts`:**
    *   Remove the import of `listNuxtModules` from `~/server/utils/listNuxtModules`.
    *   Import the `listNuxtModules` tool directly from the (yet to be discovered) correct server-side location.
    *   Call the tool directly inside the `defineEventHandler`.
2.  **Delete `server/utils/listNuxtModules.ts`:** This file will become redundant after the refactoring.

### 4. Verification Strategy

To confirm the success of the fix and prevent regressions, the following verification steps will be performed:

1.  **Start the Development Server:** Run `bun dev` and confirm that the application starts without the Rollup error.
2.  **Test the Modules Page:** Navigate to the `/modules` page in the browser and verify that the list of Nuxt modules is still being fetched and displayed correctly.
3.  **Run Unit and E2E Tests:** Execute the full test suite by running `bun run test` and `bun run test:e2e` to ensure that the changes have not introduced any regressions in other parts of the application.

### 5. Anticipated Challenges & Considerations

*   **Finding the Correct Import:** The main challenge will be to find the correct way to import and use the `list_nuxt_modules` tool on the server side. This may require some experimentation and deep diving into the Nuxt 3 documentation.
*   **Understanding Nitro:** Nuxt 3's server engine, Nitro, has its own conventions and APIs. A lack of familiarity with Nitro could slow down the resolution process.
*   **Potential for Breaking Changes:** Modifying the server-side logic could have unintended consequences. The verification strategy is crucial to mitigate this risk.

This strategic plan will be saved to `docs/13-fix-rollup-error.md`.